import{ah as C,s as l,c as d,b as a,e as s,N as x,E as F,n as T,o as r,a3 as y,M as _,f as z,x as o,d as t,F as h,A as g}from"./main-2c7b2f02.js";import{u as B}from"./useApi-0b8c4c7e.js";import{V as E}from"./VRow-ce7baa34.js";import{V as i}from"./VCol-e2ec769f.js";import{V as S}from"./VCard-d4db518d.js";import{V as c}from"./VCardText-57b803c4.js";import{V as N}from"./VAlert-5c5114b4.js";import{V as R}from"./VTable-82edae16.js";import{V as k}from"./VDivider-9163f14e.js";import"./VAvatar-f742314d.js";import"./VImg-58d13ec6.js";const M={key:0},j={class:"text-center"},D=t("p",{style:{"font-size":"20px"}}," CAF ",-1),I=t("p",{style:{"font-size":"20px"}}," Emprunteur ",-1),P=t("p",{style:{"font-size":"20px"}}," N° de compte ",-1),L=t("p",{style:{"font-size":"20px"}}," Activité ",-1),U=t("p",{style:{"font-size":"20px"}}," Objet du financement ",-1),q=t("p",{style:{"font-size":"20px"}}," Type de concours solicité ",-1),G=t("br",null,null,-1),H={style:{"font-size":"20px"}},O={style:{"font-size":"20px"}},Q={style:{"font-size":"20px"}},$={style:{"font-size":"20px"}},J={style:{"font-size":"20px"}},K={style:{"font-size":"20px"}},W={style:{"font-size":"20px"}},X=t("h2",null,"CARACTERISTIQUES",-1),Y={colspan:"5"},Z={colspan:"1"},ee=t("h2",null,"GARANTIES A RECUEILLIR",-1),fe={__name:"[id]",async setup(te){let u,p;const b=F(),w=T();let f="/pv";const V={mensual:"Mensuelle",quarterly:"Trimestrielle","semi-annual":"Semestrielle",annual:"Annuel","in-fine":"À la fin"},{data:e}=([u,p]=C(()=>B(`/verbal-trial/${Number(w.params.id)}?with_caf=1&with_type_of_credit=1&with_type_of_guarantees=1`)),u=await u,p(),u);e.value.status==200?e.value=e.value.data.verbalTrial:b.push("/pv");const m=[{title:"Montant",value:String(e.value.amount).replace(/\B(?=(\d{3})+(?!\d))/g," ")+"F CFA"},{title:"Durée",value:e.value.duration+" mois"},{title:"Périodicité",value:V[e.value.periodicity]},{title:"Taux d'intérêt HT",value:e.value.tax_fee_interest_rate+"%"},{title:"TAF",value:e.value.taf+"%"},{title:"Echéance TTC",value:String(e.value.due_amount).replace(/\B(?=(\d{3})+(?!\d))/g," ")+"F CFA"},{title:"Frais de dossier",value:String(e.value.amount*e.value.administrative_fees_percentage/100).replace(/\B(?=(\d{3})+(?!\d))/g," ")+"F CFA"},{title:"Prime d'assurance",value:String(e.value.insurance_premium).replace(/\B(?=(\d{3})+(?!\d))/g," ")+"F CFA"}];return e.value.duration>13&&m.push({title:"Prime de révision de ligne",value:"1% du capital restant dû après 13 mois"}),e.value.guarantees.forEach(v=>{v.type_of_guarantee_id==9&&(f="/pv/without-notification")}),(v,ae)=>l(e)?(r(),d("section",M,[a(E,null,{default:s(()=>[a(i,{cols:"12"},{default:s(()=>[a(S,null,{default:s(()=>[a(c,{class:"d-flex flex-wrap justify-space-between flex-column flex-sm-row print-row text-lg"},{default:s(()=>[a(i,{cols:"10"},{default:s(()=>[a(y,{"prepend-icon":"tabler-arrow-narrow-left",to:l(f),disabled:l(e).status=="vaidated"},{default:s(()=>[_(" Procès verbaux ")]),_:1},8,["to","disabled"])]),_:1}),a(i,{cols:"2",class:"text-right"},{default:s(()=>[a(y,{"append-icon":"tabler-edit",to:{name:"pv-edit-id",params:{id:l(e).id}},disabled:l(e).status=="validated"},{default:s(()=>[_(" Modifier ")]),_:1},8,["to","disabled"])]),_:1}),l(e).status=="rejected"&&l(e).status_observation?(r(),z(i,{key:0},{default:s(()=>[a(N,{color:"warning"},{default:s(()=>[_(" Motif du refus: "+o(l(e).status_observation),1)]),_:1})]),_:1})):x("",!0),a(i,{cols:"12"},{default:s(()=>[t("h2",j," Procès Verbal N°"+o(l(e).committee_id),1)]),_:1}),a(i,{cols:"6"},{default:s(()=>[D,I,P,L,U,q,G,t("p",H," Date de validation: "+o(l(e).created_at_fr),1)]),_:1}),a(i,{cols:"6"},{default:s(()=>[t("p",O," : "+o(l(e).caf.full_name),1),t("p",Q,[_(" : "),t("strong",null,o(l(e).applicant_last_name+" "+l(e).applicant_first_name),1)]),t("p",$," : "+o(l(e).account_number),1),t("p",J," : "+o(l(e).activity),1),t("p",K," : "+o(l(e).purpose_of_financing),1),t("p",W," : "+o(l(e).type_of_credit.name),1)]),_:1})]),_:1}),a(c,{class:"d-flex flex-wrap justify-space-between flex-column flex-sm-row print-row text-lg"},{default:s(()=>[a(i,{cols:"12"},{default:s(()=>[X]),_:1}),a(i,{cols:"12"},{default:s(()=>[a(R,{class:"text-no-wrap"},{default:s(()=>[t("tbody",null,[(r(),d(h,null,g(m,n=>t("tr",{key:n.key},[t("td",Y,o(n.title),1),t("td",Z,o(n.value),1)])),64))])]),_:1})]),_:1})]),_:1}),a(c,{class:"d-flex flex-wrap justify-space-between flex-column flex-sm-row print-row text-lg"},{default:s(()=>[a(i,{cols:"12"},{default:s(()=>[ee]),_:1}),a(i,{cols:"12"},{default:s(()=>[t("p",null,[t("ul",null,[(r(!0),d(h,null,g(l(e).guarantees,(n,A)=>(r(),d("li",{key:A,style:{"font-size":"20px"}},o(n.type_of_guarantee.name)+" de "+o(String(n.value).replace(/\B(?=(\d{3})+(?!\d))/g," "))+" F CFA : "+o(n.comment),1))),128))])])]),_:1})]),_:1}),a(k)]),_:1})]),_:1})]),_:1})])):x("",!0)}};export{fe as default};
