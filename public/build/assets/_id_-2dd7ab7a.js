import{r as u}from"./validators-be8c4c00.js";import{E as T,n as j,ah as k,a1 as N,r as E,o as P,c as $,b as e,e as o,a2 as F,a3 as y,s as a,M as v,d as p,Z as w,C as L,D as S,aj as D}from"./main-f1b08e28.js";import{_ as B}from"./AppDateTimePicker-ba3aa1c2.js";import{_ as R}from"./AppTextField-69a687db.js";import{_ as G}from"./AppSelect-7de5cc5a.js";import{c as O}from"./createUrl-4bc7136b.js";import{u as Z}from"./useApi-a3fc7afe.js";import{$ as z}from"./api-685ff73f.js";import{_ as H}from"./_plugin-vue_export-helper-c27b6911.js";import{V as J}from"./VForm-1f059ba2.js";import{V as b}from"./VRow-cfd5c28f.js";import{V as d}from"./VCol-785143ee.js";import{V as K}from"./VCard-3bc3303e.js";import{V as Q}from"./VCardText-75d87fa3.js";import"./VTextField-f14477a0.js";import"./VImg-b961b6d3.js";import"./forwardRefs-6ea3df5c.js";import"./VSelect-64c654bc.js";import"./VList-1035e3ce.js";import"./VAvatar-449fc9b2.js";import"./VDivider-e33bebdc.js";import"./VOverlay-d3b76df3.js";import"./VMenu-aa75d60b.js";import"./index-9c720871.js";import"./useAbility-259a9a97.js";const U=c=>(L("data-v-80ceb0d9"),c=c(),S(),c),W=U(()=>p("div",{class:"d-flex flex-wrap justify-start justify-sm-space-between gap-y-4 gap-x-6 mb-6"},[p("div",{class:"d-flex flex-column justify-center"},[p("h4",{class:"text-h4 font-weight-medium"},"Modifer une caution")])],-1)),X={class:"d-flex flex-wrap justify-start justify-sm-space-between gap-y-4 gap-x-6 mb-6"},Y=U(()=>p("div",{class:"d-flex flex-column justify-center"},null,-1)),ee={class:"d-flex gap-4 align-center flex-wrap"},ae={__name:"[id]",async setup(c){let f,h;const x=T(),m=j(),{data:C}=([f,h]=k(()=>Z(O(`/guarantor/${m.params.id}`,{query:{with_contract:1}}))),f=await f,h(),f),r=N(()=>C.value.data.guarantor),q=()=>({civility:"",first_name:"",last_name:"",birth_date:"",birth_place:"",nationality:"",home_address:"",type_of_identity_document:"",number_of_identity_document:"",date_of_issue_of_identity_document:"",function:"",phone_number:""}),s=E(q()),A=[{value:"Mr",title:"Mr"},{value:"Mme",title:"Mme"},{value:"Mlle",title:"Mlle"}],M=[{value:"cni",title:"Carte d'identité nationale"},{value:"passport",title:"Passeport"},{value:"residence_certificate",title:"Certificat de résidence"},{value:"driving_licence",title:"Permis de conduire"}],g=E(),I=()=>{var t;(t=g.value)==null||t.validate().then(async({valid:l})=>{if(l){const _=await z(`/guarantor/${m.params.id}`,{method:"PUT",body:{contract_id:m.params.contract_id,civility:r.value.civility,first_name:r.value.first_name,last_name:r.value.last_name,birth_date:r.value.birth_date,birth_place:r.value.birth_place,nationality:r.value.nationality,home_address:r.value.home_address,type_of_identity_document:r.value.type_of_identity_document,number_of_identity_document:r.value.number_of_identity_document,date_of_issue_of_identity_document:r.value.date_of_issue_of_identity_document,function:r.value.function,phone_number:r.value.phone_number}});if(s.value=q(),_.status==200)x.push({name:"contract-contract_id-guarantor",params:{contract_id:m.params.contract_id}});else for(const n in _.errors)_.errors[n].forEach(V=>{s.value[n]+=V+`
`});D(()=>{var n;(n=g.value)==null||n.resetValidation()})}})};return(t,l)=>{const _=G,n=R,V=B;return P(),$("div",null,[W,e(J,{ref_key:"refForm",ref:g,onSubmit:F(I,["prevent"])},{default:o(()=>[e(b,null,{default:o(()=>[e(d,{cols:"11"},{default:o(()=>[e(y,{"prepend-icon":"tabler-arrow-left",to:{name:"contract-contract_id-guarantor",params:{contract_id:a(m).params.contract_id}}},{default:o(()=>[v(" Cautions ")]),_:1},8,["to"])]),_:1}),e(d,{cols:"1"},{default:o(()=>[e(y,{"prepend-icon":"tabler-eye",to:{name:"contract-contract_id-guarantor-id",params:{contract_id:a(m).params.contract_id,id:a(m).params.id}}},{default:o(()=>[v(" Voir ")]),_:1},8,["to"])]),_:1})]),_:1}),e(b,null,{default:o(()=>[e(d,{md:"12"},{default:o(()=>[e(K,{class:"mb-6",title:"Information de la caution "},{default:o(()=>[e(Q,null,{default:o(()=>[e(b,null,{default:o(()=>[e(d,{cols:"12",md:"6",lg:"4"},{default:o(()=>[e(_,{modelValue:a(r).civility,"onUpdate:modelValue":l[0]||(l[0]=i=>a(r).civility=i),items:A,"error-messages":s.value.civility,label:"Civilité",placeholder:"Ex: Mr",rules:["requiredValidator"in t?t.requiredValidator:a(u)]},null,8,["modelValue","error-messages","rules"])]),_:1}),e(d,{cols:"12",md:"6",lg:"4"},{default:o(()=>[e(n,{modelValue:a(r).first_name,"onUpdate:modelValue":l[1]||(l[1]=i=>a(r).first_name=i),"error-messages":s.value.first_name,label:"Prénom",placeholder:"Ex: Cesar",rules:["requiredValidator"in t?t.requiredValidator:a(u)]},null,8,["modelValue","error-messages","rules"])]),_:1}),e(d,{cols:"12",md:"6",lg:"4"},{default:o(()=>[e(n,{modelValue:a(r).last_name,"onUpdate:modelValue":l[2]||(l[2]=i=>a(r).last_name=i),"error-messages":s.value.last_name,label:"Nom",placeholder:"Ex: DEFALGO",rules:["requiredValidator"in t?t.requiredValidator:a(u)]},null,8,["modelValue","error-messages","rules"])]),_:1}),e(d,{cols:"12",md:"6",lg:"4"},{default:o(()=>[e(V,{modelValue:a(r).birth_date,"onUpdate:modelValue":l[3]||(l[3]=i=>a(r).birth_date=i),"error-messages":s.value.birth_date,label:"Date de naissance",placeholder:"Ex: 2000-12-12",rules:["requiredValidator"in t?t.requiredValidator:a(u)]},null,8,["modelValue","error-messages","rules"])]),_:1}),e(d,{cols:"12",md:"6",lg:"4"},{default:o(()=>[e(n,{modelValue:a(r).birth_place,"onUpdate:modelValue":l[4]||(l[4]=i=>a(r).birth_place=i),"error-messages":s.value.birth_place,label:"Lieu de naissance",placeholder:"Ex: Lomé",rules:["requiredValidator"in t?t.requiredValidator:a(u)]},null,8,["modelValue","error-messages","rules"])]),_:1}),e(d,{cols:"12",md:"6",lg:"4"},{default:o(()=>[e(n,{modelValue:a(r).nationality,"onUpdate:modelValue":l[5]||(l[5]=i=>a(r).nationality=i),"error-messages":s.value.nationality,label:"Nationalité",placeholder:"Ex: Togolaise",rules:["requiredValidator"in t?t.requiredValidator:a(u)]},null,8,["modelValue","error-messages","rules"])]),_:1}),e(d,{cols:"12",md:"6",lg:"4"},{default:o(()=>[e(n,{modelValue:a(r).home_address,"onUpdate:modelValue":l[6]||(l[6]=i=>a(r).home_address=i),"error-messages":s.value.home_address,label:"Addresse du domicile",placeholder:"Ex: Adewi, Lomé",rules:["requiredValidator"in t?t.requiredValidator:a(u)]},null,8,["modelValue","error-messages","rules"])]),_:1}),e(d,{cols:"12",md:"6",lg:"4"},{default:o(()=>[e(_,{modelValue:a(r).type_of_identity_document,"onUpdate:modelValue":l[7]||(l[7]=i=>a(r).type_of_identity_document=i),items:M,"error-messages":s.value.type_of_identity_document,label:"Type de la pièce d'identité",placeholder:"Ex: Passeport",rules:["requiredValidator"in t?t.requiredValidator:a(u)]},null,8,["modelValue","error-messages","rules"])]),_:1}),e(d,{cols:"12",md:"6",lg:"4"},{default:o(()=>[e(n,{modelValue:a(r).number_of_identity_document,"onUpdate:modelValue":l[8]||(l[8]=i=>a(r).number_of_identity_document=i),"error-messages":s.value.number_of_identity_document,label:"Numéro de la pièce d'identité",placeholder:"Ex: 251012345678",rules:["requiredValidator"in t?t.requiredValidator:a(u)]},null,8,["modelValue","error-messages","rules"])]),_:1}),e(d,{cols:"12",md:"6",lg:"4"},{default:o(()=>[e(V,{modelValue:a(r).date_of_issue_of_identity_document,"onUpdate:modelValue":l[9]||(l[9]=i=>a(r).date_of_issue_of_identity_document=i),"error-messages":s.value.date_of_issue_of_identity_document,label:"Date de délivrance de la pièce d'identité",placeholder:"Ex: 2022-01-01",rules:["requiredValidator"in t?t.requiredValidator:a(u)]},null,8,["modelValue","error-messages","rules"])]),_:1}),e(d,{cols:"12",md:"6",lg:"4"},{default:o(()=>[e(n,{modelValue:a(r).function,"onUpdate:modelValue":l[10]||(l[10]=i=>a(r).function=i),"error-messages":s.value.function,label:"Fonction",placeholder:"Ex: Agent de change",rules:["requiredValidator"in t?t.requiredValidator:a(u)]},null,8,["modelValue","error-messages","rules"])]),_:1}),e(d,{cols:"12",md:"6",lg:"4"},{default:o(()=>[e(n,{modelValue:a(r).phone_number,"onUpdate:modelValue":l[11]||(l[11]=i=>a(r).phone_number=i),"error-messages":s.value.phone_number,label:"Numéro de téléphone",placeholder:"Ex: +228 96 96 96 96",rules:["requiredValidator"in t?t.requiredValidator:a(u)]},null,8,["modelValue","error-messages","rules"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(d,{cols:"12"},{default:o(()=>[p("div",X,[Y,p("div",ee,[e(y,{type:"reset",variant:"tonal",color:"primary"},{default:o(()=>[e(w,{start:"",icon:"tabler-circle-minus"}),v(" Effacer ")]),_:1}),e(y,{type:"submit",class:"me-3"},{default:o(()=>[v(" Enregistrer "),e(w,{end:"",icon:"tabler-checkbox"})]),_:1})])])]),_:1})]),_:1})]),_:1},512)])}}},Ce=H(ae,[["__scopeId","data-v-80ceb0d9"]]);export{Ce as default};
