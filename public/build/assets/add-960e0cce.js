import{r as m}from"./validators-be8c4c00.js";import{r as p,E as C,aa as k,ai as F,o as T,c as j,b as e,e as a,a2 as B,F as U,s as r,d as n,a3 as _,Z as v,M as g}from"./main-775cdf0e.js";import{_ as M}from"./AppSelect-056307b5.js";import{_ as R}from"./AppTextField-dcc306b1.js";import"./api-81ecf0de.js";import{a as $}from"./axios-1779699b.js";/* empty css                    */import{V as b}from"./VCard-f8b4f0b6.js";import{V as N}from"./VForm-d6ed9dce.js";import{V as f}from"./VCardText-183f2498.js";import{V as c}from"./VRow-96f26337.js";import{V as i}from"./VCol-0f5eaa65.js";import"./VTextField-985e58a1.js";import"./VImg-1cbae8ee.js";import"./forwardRefs-6ea3df5c.js";import"./VSelect-a756b285.js";import"./VList-50799f13.js";import"./VAvatar-9b1b0588.js";import"./VDivider-b18f6b19.js";import"./VOverlay-27fd024d.js";import"./VMenu-6552829b.js";import"./index-9c720871.js";import"./useAbility-1db88a2b.js";const S=n("h2",null,"Ajouter un utilisateur",-1),D={class:"d-flex flex-wrap justify-start justify-sm-space-between gap-y-4 gap-x-6 mb-6"},I=n("div",{class:"d-flex flex-column justify-center"},null,-1),P={class:"d-flex gap-4 align-center flex-wrap"},pe={__name:"add",setup(z){const t=p({email:"",password:"",role:"",name:""}),w=()=>({email:"",password:"",role:"",name:""}),y=[{value:"admin",title:"Administrateur"},{value:"credit_analyst",title:"Analyst crédit"},{value:"head_credit",title:"Head credit"},{value:"credit_admin",title:"Admin crédit"},{value:"operation",title:"Opérations"},{value:"md",title:"MD"},{value:"caf",title:"CAF"},{value:"ca",title:"CA"},{value:"create_attestation",title:"Créer attestation"}],h=C(),q=k("userToken").value,x=F.useToast(),V=p(),A=()=>{var l;(l=V.value)==null||l.validate().then(async({valid:o})=>{if(o){const{data:u}=await $.post("/api/user",{email:t.value.email,name:t.value.name,password:t.value.password,full_name:t.value.name,profile:t.value.role,activated:1,password_change_required:0},{headers:{Authorization:`Bearer ${q}`}});u.status==201&&(x.success("Utilisateur ajouté!!",{position:"top-right"}),h.push("/user"))}})},d=p(w());return(l,o)=>{const u=R,E=M;return T(),j(U,null,[e(b,{class:"mb-6"},{default:a(()=>[e(f,null,{default:a(()=>[e(c,null,{default:a(()=>[e(f,null,{default:a(()=>[S]),_:1})]),_:1})]),_:1})]),_:1}),e(N,{ref_key:"refForm",ref:V,onSubmit:B(A,["prevent"])},{default:a(()=>[e(c,null,{default:a(()=>[e(i,{md:"12"},{default:a(()=>[e(b,{class:"mb-6",title:"Information sur l'utilisateur"},{default:a(()=>[e(f,null,{default:a(()=>[e(c,null,{default:a(()=>[e(i,{cols:"12",md:"6",lg:"4"},{default:a(()=>[e(u,{modelValue:r(t).name,"onUpdate:modelValue":o[0]||(o[0]=s=>r(t).name=s),"error-messages":r(d).name,label:"Votre nom",rules:["requiredValidator"in l?l.requiredValidator:r(m)]},null,8,["modelValue","error-messages","rules"])]),_:1}),e(i,{cols:"12",md:"6",lg:"4"},{default:a(()=>[e(u,{modelValue:r(t).email,"onUpdate:modelValue":o[1]||(o[1]=s=>r(t).email=s),"error-messages":r(d).email,label:"Votre e-mail",rules:["requiredValidator"in l?l.requiredValidator:r(m)]},null,8,["modelValue","error-messages","rules"])]),_:1}),e(i,{cols:"12",md:"6",lg:"4"},{default:a(()=>[e(E,{modelValue:r(t).role,"onUpdate:modelValue":o[2]||(o[2]=s=>r(t).role=s),items:y,"error-messages":r(d).role,label:"Rôle",placeholder:"Ex: Administrateur",rules:["requiredValidator"in l?l.requiredValidator:r(m)]},null,8,["modelValue","error-messages","rules"])]),_:1}),e(i,{cols:"12",md:"6",lg:"4"},{default:a(()=>[e(u,{modelValue:r(t).password,"onUpdate:modelValue":o[3]||(o[3]=s=>r(t).password=s),"error-messages":r(d).password,label:"Mot de passe",placeholder:"Ex: Passer@1234",rules:["requiredValidator"in l?l.requiredValidator:r(m)]},null,8,["modelValue","error-messages","rules"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(i,{cols:"12"},{default:a(()=>[n("div",D,[I,n("div",P,[e(_,{type:"reset",variant:"tonal",color:"primary"},{default:a(()=>[e(v,{start:"",icon:"tabler-circle-minus"}),g(" Effacer ")]),_:1}),e(_,{type:"submit",class:"me-3"},{default:a(()=>[g(" Enregistrer "),e(v,{end:"",icon:"tabler-checkbox"})]),_:1})])])]),_:1})]),_:1})]),_:1},512)],64)}}};export{pe as default};
