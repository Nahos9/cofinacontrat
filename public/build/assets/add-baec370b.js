import{r as u}from"./validators-be8c4c00.js";import{n as $,E as B,r as y,ah as L,a1 as R,o as g,c as G,b as t,e as l,a2 as H,s as n,f as A,N as T,d as _,a3 as U,Z as C,M as N,C as M,D as J,aj as z}from"./main-b79bab7d.js";import{_ as K}from"./AppDateTimePicker-e1c7c24e.js";import{_ as O}from"./AppSelect-c193feb1.js";import{_ as Z}from"./AppTextField-27ca1ff4.js";import{_ as Q}from"./AppAutocomplete-840baa4d.js";import{u as W}from"./useApi-f36f0b4b.js";import{c as X}from"./createUrl-424af01a.js";import{$ as Y}from"./api-0630d56b.js";import{_ as ee}from"./_plugin-vue_export-helper-c27b6911.js";import{V as te}from"./VForm-e3fe40fd.js";import{V as v}from"./VRow-aaddea0f.js";import{V as s}from"./VCol-54e0adfb.js";import{V as q}from"./VCard-ab8a42b0.js";import{V as h}from"./VCardText-b8528b45.js";import{V as re}from"./VSlider-34023991.js";import{V as ae}from"./VTextField-05b92c6c.js";import"./VSelect-0570748a.js";import"./forwardRefs-6ea3df5c.js";import"./VList-4e005a62.js";import"./VImg-c7f49976.js";import"./VAvatar-f2d16882.js";import"./VDivider-20e200a7.js";import"./VOverlay-b15ad492.js";import"./VMenu-b01cd03b.js";import"./filter-f4e45105.js";import"./index-9c720871.js";import"./useAbility-26157080.js";const j=p=>(M("data-v-5eb2b569"),p=p(),J(),p),le=j(()=>_("div",{class:"d-flex flex-wrap justify-start justify-sm-space-between gap-y-4 gap-x-6 mb-6"},[_("div",{class:"d-flex flex-column justify-center"},[_("h4",{class:"text-h4 font-weight-medium"}," Ajouter une nouvelle notification "),_("span",null,"Notification pour un Procès verbal")])],-1)),oe={class:"d-flex flex-wrap justify-start justify-sm-space-between gap-y-4 gap-x-6 mb-6"},ie=j(()=>_("div",{class:"d-flex flex-column justify-center"},null,-1)),se={class:"d-flex gap-4 align-center flex-wrap"},ne={__name:"add",async setup(p){let f,k;const E=$(),I=B(),e=y({verbal_trial_id:null,representative_phone_number:"+228 90 90 90 90",representative_home_address:"Adewi",number_of_due_dates:15,risk_premium_percentage:0,total_amount_of_interest:15e5,representative_type_of_identity_document:"passport",representative_number_of_identity_document:"KJH-VCVG-FGH-HBJN",representative_date_of_issue_of_identity_document:"2026-02-02",type:"company",business_denomination:"ETS Alberta"}),w=()=>({verbal_trial_id:"",representative_phone_number:"",representative_home_address:"",number_of_due_dates:"",risk_premium_percentage:"",total_amount_of_interest:"",representative_type_of_identity_document:"",representative_number_of_identity_document:"",representative_date_of_issue_of_identity_document:"",type:"",business_denomination:""}),i=y(w()),{data:P}=([f,k]=L(()=>W(X("/verbal-trial",{query:{has_notification:0,has_contract:0,paginate:0,has_mortgage:0,has_cat:0,status:"v"}}))),f=await f,k(),f),x=R(()=>P.value.data),c=y(),S=()=>{var r;(r=c.value)==null||r.validate().then(async({valid:a})=>{if(a){const b={verbal_trial_id:e.value.verbal_trial_id,representative_phone_number:e.value.representative_phone_number,representative_home_address:e.value.representative_home_address,number_of_due_dates:e.value.number_of_due_dates,risk_premium_percentage:e.value.risk_premium_percentage,total_amount_of_interest:e.value.total_amount_of_interest,representative_type_of_identity_document:e.value.representative_type_of_identity_document,representative_number_of_identity_document:e.value.representative_number_of_identity_document,representative_date_of_issue_of_identity_document:e.value.representative_date_of_issue_of_identity_document,type:e.value.type,business_denomination:e.value.business_denomination,is_simple:!0},d=await Y("/notification",{method:"POST",body:b});if(i.value=w(),d.status==201)I.push("/simple-notification");else for(const m in d.errors)d.errors[m].forEach(V=>{i.value[m]+=V+`
`});z(()=>{var m;(m=c.value)==null||m.resetValidation()})}})};if(E.query.id){const r=parseInt(E.query.id);x.value.find(a=>a.id==r)&&(e.value.verbal_trial_id=r)}const F=[{value:"company",title:"Société"},{value:"individual_business",title:"Entreprise Individuel"},{value:"particular",title:"Particulier"}],D=[{value:"cni",title:"Carte d'identité nationale"},{value:"passport",title:"Passeport"},{value:"residence_certificate",title:"Certificat de résidence"},{value:"driving_licence",title:"Permis de conduire"}];return(r,a)=>{const b=Q,d=Z,m=O,V=K;return g(),G("div",null,[le,t(te,{ref_key:"refForm",ref:c,onSubmit:H(S,["prevent"])},{default:l(()=>[t(v,null,{default:l(()=>[t(s,{md:"12"},{default:l(()=>[t(q,{class:"mb-6",title:"Information sur notification"},{default:l(()=>[t(h,null,{default:l(()=>[t(v,null,{default:l(()=>[t(s,{cols:"12",md:"6",lg:"4"},{default:l(()=>[t(b,{modelValue:e.value.verbal_trial_id,"onUpdate:modelValue":a[0]||(a[0]=o=>e.value.verbal_trial_id=o),items:n(x),"error-messages":i.value.verbal_trial_id,label:"Procès verbal",placeholder:"Ex: CFNTG-044-13-12-23-01212",rules:["requiredValidator"in r?r.requiredValidator:n(u)],"item-title":"label","item-value":"id"},null,8,["modelValue","items","error-messages","rules"])]),_:1}),t(s,{cols:"12",md:"6",lg:"4"},{default:l(()=>[t(d,{modelValue:e.value.representative_phone_number,"onUpdate:modelValue":a[1]||(a[1]=o=>e.value.representative_phone_number=o),"error-messages":i.value.representative_phone_number,label:"Numéro de téléphone",placeholder:"Ex: +228 96 96 96 96",rules:["requiredValidator"in r?r.requiredValidator:n(u)]},null,8,["modelValue","error-messages","rules"])]),_:1}),t(s,{cols:"12",md:"6",lg:"4"},{default:l(()=>[t(d,{modelValue:e.value.representative_home_address,"onUpdate:modelValue":a[2]||(a[2]=o=>e.value.representative_home_address=o),"error-messages":i.value.representative_home_address,label:"Addresse",placeholder:"Ex: Adewi",rules:["requiredValidator"in r?r.requiredValidator:n(u)]},null,8,["modelValue","error-messages","rules"])]),_:1}),t(s,{cols:"12",md:"6",lg:"4"},{default:l(()=>[t(d,{type:"number",modelValue:e.value.number_of_due_dates,"onUpdate:modelValue":a[3]||(a[3]=o=>e.value.number_of_due_dates=o),"error-messages":i.value.number_of_due_dates,label:"Nombre d'échéance",placeholder:"Ex: 4",rules:["requiredValidator"in r?r.requiredValidator:n(u)]},null,8,["modelValue","error-messages","rules"])]),_:1}),t(s,{cols:"12",md:"6",lg:"4"},{default:l(()=>[t(d,{modelValue:e.value.total_amount_of_interest,"onUpdate:modelValue":a[4]||(a[4]=o=>e.value.total_amount_of_interest=o),type:"number","error-messages":i.value.total_amount_of_interest,label:"Montant total des intérêts",placeholder:"Ex: 15 000 000",rules:["requiredValidator"in r?r.requiredValidator:n(u)]},null,8,["modelValue","error-messages","rules"])]),_:1}),t(s,{cols:"12",md:"6",lg:"4"},{default:l(()=>[t(m,{modelValue:e.value.type,"onUpdate:modelValue":a[5]||(a[5]=o=>e.value.type=o),items:F,"error-messages":i.value.type,label:"Type",placeholder:"Ex: Particulier",rules:["requiredValidator"in r?r.requiredValidator:n(u)]},null,8,["modelValue","error-messages","rules"])]),_:1}),t(s,{cols:"12",md:"6",lg:"4"},{default:l(()=>[t(m,{modelValue:e.value.representative_type_of_identity_document,"onUpdate:modelValue":a[6]||(a[6]=o=>e.value.representative_type_of_identity_document=o),items:D,"error-messages":i.value.representative_type_of_identity_document,label:"Type de la pièce d'identité",placeholder:"Ex: Passeport",rules:["requiredValidator"in r?r.requiredValidator:n(u)]},null,8,["modelValue","error-messages","rules"])]),_:1}),t(s,{cols:"12",md:"6",lg:"4"},{default:l(()=>[t(d,{modelValue:e.value.representative_number_of_identity_document,"onUpdate:modelValue":a[7]||(a[7]=o=>e.value.representative_number_of_identity_document=o),"error-messages":i.value.representative_number_of_identity_document,label:"Numéro de la pièce d'identité",placeholder:"Ex: 251012345678",rules:["requiredValidator"in r?r.requiredValidator:n(u)]},null,8,["modelValue","error-messages","rules"])]),_:1}),t(s,{cols:"12",md:"12",lg:"4"},{default:l(()=>[t(V,{modelValue:e.value.representative_date_of_issue_of_identity_document,"onUpdate:modelValue":a[8]||(a[8]=o=>e.value.representative_date_of_issue_of_identity_document=o),"error-messages":i.value.representative_date_of_issue_of_identity_document,label:"Date de délivrance de la pièce d'identité",placeholder:"Ex: 2022-01-01",rules:["requiredValidator"in r?r.requiredValidator:n(u)]},null,8,["modelValue","error-messages","rules"])]),_:1}),t(s,{cols:"12"},{default:l(()=>[t(re,{modelValue:e.value.risk_premium_percentage,"onUpdate:modelValue":a[10]||(a[10]=o=>e.value.risk_premium_percentage=o),label:"Prime de risque (en pourcentage) du demandeur","error-messages":i.value.risk_premium_percentage,"thumb-size":15,"thumb-label":"always",rules:["requiredValidator"in r?r.requiredValidator:n(u)],step:"0.1"},{append:l(()=>[t(ae,{modelValue:e.value.risk_premium_percentage,"onUpdate:modelValue":a[9]||(a[9]=o=>e.value.risk_premium_percentage=o),"error-messages":i.value.risk_premium_percentage,type:"number",style:{width:"80px"},density:"compact","hide-details":"",variant:"outlined",suffix:"%"},null,8,["modelValue","error-messages"])]),_:1},8,["modelValue","error-messages","rules"])]),_:1})]),_:1})]),_:1})]),_:1}),e.value.type=="company"?(g(),A(q,{key:0,class:"mb-6",title:"Information sur la société"},{default:l(()=>[t(h,null,{default:l(()=>[t(v,{cols:"12"},{default:l(()=>[t(s,{cols:"12"},{default:l(()=>[t(d,{modelValue:e.value.business_denomination,"onUpdate:modelValue":a[11]||(a[11]=o=>e.value.business_denomination=o),"error-messages":i.value.business_denomination,label:"Dénomination",placeholder:"Ex: Adjovidjo",rules:["requiredValidator"in r?r.requiredValidator:n(u)]},null,8,["modelValue","error-messages","rules"])]),_:1})]),_:1})]),_:1})]),_:1})):T("",!0),e.value.type=="individual_business"?(g(),A(q,{key:1,class:"mb-6",title:"Information sur l'entreprise individuele"},{default:l(()=>[t(h,null,{default:l(()=>[t(v,{cols:"12"},{default:l(()=>[t(s,{cols:"12"},{default:l(()=>[t(d,{modelValue:e.value.business_denomination,"onUpdate:modelValue":a[12]||(a[12]=o=>e.value.business_denomination=o),"error-messages":i.value.business_denomination,label:"Dénomination",placeholder:"Ex: Agban",rules:["requiredValidator"in r?r.requiredValidator:n(u)]},null,8,["modelValue","error-messages","rules"])]),_:1})]),_:1})]),_:1})]),_:1})):T("",!0)]),_:1}),t(s,{cols:"12"},{default:l(()=>[_("div",oe,[ie,_("div",se,[t(U,{type:"reset",variant:"tonal",color:"primary"},{default:l(()=>[t(C,{start:"",icon:"tabler-circle-minus"}),N(" Effacer ")]),_:1}),t(U,{type:"submit",class:"me-3"},{default:l(()=>[N(" Enregistrer "),t(C,{end:"",icon:"tabler-checkbox"})]),_:1})])])]),_:1})]),_:1})]),_:1},512)])}}},De=ee(ne,[["__scopeId","data-v-5eb2b569"]]);export{De as default};
