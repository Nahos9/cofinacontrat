import{r as m}from"./validators-be8c4c00.js";import{r as p,E as k,aa as C,ai as F,o as T,c as j,b as e,e as a,a2 as B,F as U,s as r,d as n,a3 as _,Z as v,M as g}from"./main-b79bab7d.js";import{_ as M}from"./AppSelect-c193feb1.js";import{_ as R}from"./AppTextField-27ca1ff4.js";import"./api-0630d56b.js";import{a as $}from"./axios-1779699b.js";/* empty css                    */import{V as b}from"./VCard-ab8a42b0.js";import{V as N}from"./VForm-e3fe40fd.js";import{V as f}from"./VCardText-b8528b45.js";import{V as c}from"./VRow-aaddea0f.js";import{V as i}from"./VCol-54e0adfb.js";import"./VTextField-05b92c6c.js";import"./VImg-c7f49976.js";import"./forwardRefs-6ea3df5c.js";import"./VSelect-0570748a.js";import"./VList-4e005a62.js";import"./VAvatar-f2d16882.js";import"./VDivider-20e200a7.js";import"./VOverlay-b15ad492.js";import"./VMenu-b01cd03b.js";import"./index-9c720871.js";import"./useAbility-26157080.js";const S=n("h2",null,"Ajouter un utilisateur",-1),D={class:"d-flex flex-wrap justify-start justify-sm-space-between gap-y-4 gap-x-6 mb-6"},I=n("div",{class:"d-flex flex-column justify-center"},null,-1),P={class:"d-flex gap-4 align-center flex-wrap"},pe={__name:"add",setup(z){const l=p({email:"",password:"",role:"",name:""}),w=()=>({email:"",password:"",role:"",name:""}),y=[{value:"admin",title:"Administrateur"},{value:"credit_analyst",title:"Analyst crédit"},{value:"head_credit",title:"Head credit"},{value:"credit_admin",title:"Admin crédit"},{value:"operation",title:"Opérations"},{value:"md",title:"MD"},{value:"caf",title:"CAF"},{value:"ca",title:"CA"}],h=k(),q=C("userToken").value,x=F.useToast(),V=p(),A=()=>{var t;(t=V.value)==null||t.validate().then(async({valid:o})=>{if(o){const{data:u}=await $.post("/api/user",{email:l.value.email,name:l.value.name,password:l.value.password,full_name:l.value.name,profile:l.value.role,activated:1,password_change_required:0},{headers:{Authorization:`Bearer ${q}`}});u.status==201&&(x.success("Utilisateur ajouté!!",{position:"top-right"}),h.push("/user"))}})},d=p(w());return(t,o)=>{const u=R,E=M;return T(),j(U,null,[e(b,{class:"mb-6"},{default:a(()=>[e(f,null,{default:a(()=>[e(c,null,{default:a(()=>[e(f,null,{default:a(()=>[S]),_:1})]),_:1})]),_:1})]),_:1}),e(N,{ref_key:"refForm",ref:V,onSubmit:B(A,["prevent"])},{default:a(()=>[e(c,null,{default:a(()=>[e(i,{md:"12"},{default:a(()=>[e(b,{class:"mb-6",title:"Information sur l'utilisateur"},{default:a(()=>[e(f,null,{default:a(()=>[e(c,null,{default:a(()=>[e(i,{cols:"12",md:"6",lg:"4"},{default:a(()=>[e(u,{modelValue:r(l).name,"onUpdate:modelValue":o[0]||(o[0]=s=>r(l).name=s),"error-messages":r(d).name,label:"Votre nom",rules:["requiredValidator"in t?t.requiredValidator:r(m)]},null,8,["modelValue","error-messages","rules"])]),_:1}),e(i,{cols:"12",md:"6",lg:"4"},{default:a(()=>[e(u,{modelValue:r(l).email,"onUpdate:modelValue":o[1]||(o[1]=s=>r(l).email=s),"error-messages":r(d).email,label:"Votre e-mail",rules:["requiredValidator"in t?t.requiredValidator:r(m)]},null,8,["modelValue","error-messages","rules"])]),_:1}),e(i,{cols:"12",md:"6",lg:"4"},{default:a(()=>[e(E,{modelValue:r(l).role,"onUpdate:modelValue":o[2]||(o[2]=s=>r(l).role=s),items:y,"error-messages":r(d).role,label:"Rôle",placeholder:"Ex: Administrateur",rules:["requiredValidator"in t?t.requiredValidator:r(m)]},null,8,["modelValue","error-messages","rules"])]),_:1}),e(i,{cols:"12",md:"6",lg:"4"},{default:a(()=>[e(u,{modelValue:r(l).password,"onUpdate:modelValue":o[3]||(o[3]=s=>r(l).password=s),"error-messages":r(d).password,label:"Mot de passe",placeholder:"Ex: Passer@1234",rules:["requiredValidator"in t?t.requiredValidator:r(m)]},null,8,["modelValue","error-messages","rules"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(i,{cols:"12"},{default:a(()=>[n("div",D,[I,n("div",P,[e(_,{type:"reset",variant:"tonal",color:"primary"},{default:a(()=>[e(v,{start:"",icon:"tabler-circle-minus"}),g(" Effacer ")]),_:1}),e(_,{type:"submit",class:"me-3"},{default:a(()=>[g(" Enregistrer "),e(v,{end:"",icon:"tabler-checkbox"})]),_:1})])])]),_:1})]),_:1})]),_:1},512)],64)}}};export{pe as default};
